<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
       <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script> -->
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
       
    
    </head>

    <body>
        
        <div id="create-update" style="display:none"> 
            <h2>create-update</h2>
            <table>
                <tr>
                    <td>ISBN</td>
                    <td><input type="text" name="ISBN"></td>
                </tr>
                <tr>
                    <td>title</td>
                    <td><input type="text" name="title"></td>     
                </tr>
                <tr>           
                    <td>author</td>
                    <td><input type="text" name="author"></td> 
                </tr>
                <tr>
                    <td>price</td>
                    <td><input type="text" name="price"></td>
                </tr>
                <tr>
                    <td></td><td><button id="create-update-button" onclick="doCreate()">Create</button></td>
                </tr>
            </table>
        </div>
        <div id="display">
            <h2>Books</h2>
            <button onclick= "showCreate()">Create</button>
            <table id="bookTable" class="table">
                <tr>
                    <th>ISBN</th><th>author</th><th>price</th><th></th><th></th><th></th>
                </tr>
                

            </table>
            </table>

        </div>

        <script>
            function showCreate(){
                document.getElementById('display').style.display="none"
                document.getElementById('create-update').style.display="block"
            }
            function showDisplay(){
                document.getElementById('display').style.display="block"
                document.getElementById('create-update').style.display="none"
            }
            function doCreate(){
                showDisplay()
            }
            function populateTable(){
                $.ajax({
                url: 'http://127.0.0.1:5000/books',
                method: "GET",
                dataType: "JSON",
                success: function (results) {
                    for(book of results){
                        addBookToTable(book)
                    }
                },
                error:function(xhr,status,error){
                    console.log ("error"+error+"code:"+status)
                }
                })
            }


            function addBookToTable(book){
                tableElem = document.getElementById('bookTable')
                rowElem = tableElem.insertRow(-1)
                rowElem.setAttribute("id", book.ISBN)
                cell1=rowElem.insertCell(0)                
                cell1.innerHTML=book.ISBN
                cell2=rowElem.insertCell(1)                
                cell2.innerHTML=book.title
                cell3=rowElem.insertCell(2)                
                cell3.innerHTML=book.author            
                cell4=rowElem.insertCell(3)                
                cell4.innerHTML=book.price
                cell5=rowElem.insertCell(4)                
                cell5.innerHTML='<button onclick="showUpdate(this)">Update</button>'
                cell6=rowElem.insertCell(5)                
                cell6.innerHTML='<button onclick="deletes(this)">Delete</button>'
            }
            populateTable()



        </script>
    </body>

</html>