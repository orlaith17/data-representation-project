<!DOCTYPE html>
<html>
    <head>
        <title>Stock</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
       <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script> -->
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
       
       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

       <style>
       .jumbotron {
         background-image: url("img/header.png");
         background-size: auto 100%; 
         background-position: right bottom;
         background-repeat: no-repeat;
        }
        </style>
    
  
  </head>

    <body>
        <div class="container">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
              
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page"  href="index.html">Home</a>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="members.html">Members</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="stock.html">Stock</a>
                  </li>
              
                </ul>

                <ul class="navbar-nav ml-auto" >

               
                  <li class="nav-item">
                    <a class="nav-link" href="/admin">Login</a>
                  </li>

                </ul>
              </div>
            </div>
          </nav>
        </div>



<div class="container">  
  
    <div class="jumbotron">
			<div class="b" >
				
				</div>

  </div>

  <div class="container text-center">

  </div>
           

</div>  


<div class="container">

  <h1>Stock</h1>
  <button  onclick="showCreate()">Create</button>

            <table class="table" id="stockTable">
                <tr>
                        <th>ID</th>
                        <th>Item</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Update</th>
                        <th>Delete</th>
                        
                </tr>                
            </table>

        <div id='createUpdateForm' style="display: none">
                <h2><span id="createLabel">Create a</span> <span id="updateLabel">update</span> Book</h2>
                <input type="hidden" name="id"/>
                Title <input type="text" name="Title" /><br/>
                Author <input type="text" name="Author"/> <br/>
                Price <input type="number" name="Price"/> <br/>
                <span><button id="doCreateButton" onclick="doCreate()">Create</button></span>
                <span><button id="doUpdateButton" onclick="doUpdate()">Update</button></span>
        </div>


</div>



</div>     

<script>
  function showCreate(){
    document.getElementById('display').style.display ="none"
    document.getElementById('create-update').style.display = "block"
  }
  function showDisplay(){
    document.getElementById('display').style.display="block"
    document.getElementById('create-update').style.display="none"
  }
  function doCreate(){
                showDisplay()
            }
  function populateTable(){
      $.ajax({
      url: 'http://127.0.0.1:5000/stock',
      method: "GET",
      dataType: "JSON",
      success: function (results) {
          for(stock of results){
              addStockToTable(stock)
          }
      },
      error:function(xhr,status,error){
          console.log ("error"+error+"code:"+status)
      }
      })
  }


  function addStockToTable(stock){
      tableElem = document.getElementById('stockTable')
      rowElem = tableElem.insertRow(-1)
      rowElem.setAttribute("id", stock.stockId)
      cell1=rowElem.insertCell(0)                
      cell1.innerHTML=stock.stockId
      cell2=rowElem.insertCell(1)                
      cell2.innerHTML=stock.name
      cell3=rowElem.insertCell(2)                
      cell3.innerHTML=stock.description            
      cell4=rowElem.insertCell(3)                
      cell4.innerHTML=stock.price
      cell5=rowElem.insertCell(4)                
      cell5.innerHTML='<button onclick="showUpdate(this)">Update</button>'
      cell6=rowElem.insertCell(5)                
      cell6.innerHTML='<button onclick="deletes(this)">Delete</button>'
  }
  populateTable()



</script>

</body>
</html>